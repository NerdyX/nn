import { $, implicit$FirstArg } from '@builder.io/qwik';
import { safeParseAsync, } from 'valibot';
/**
 * See {@link valiField$}
 */
export function valiFieldQrl(schema) {
    return $(async (value) => {
        const resolvedSchema = await schema.resolve();
        const result = await safeParseAsync(typeof resolvedSchema === 'function' ? resolvedSchema() : resolvedSchema, value, { abortPipeEarly: true });
        return result.issues?.[0].message || '';
    });
}
/**
 * Creates a validation functions that parses the Valibot schema of a field.
 *
 * @param schema A Valibot schema.
 *
 * @returns A validation function.
 */
export const valiField$ = implicit$FirstArg(valiFieldQrl);
